<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="4wilmer New Product Request Form">
	<title>Social Media Scheduler</title>
	
    <script src="formscripts.js"></script>
    <script src="formelements.js"></script>
</head>
<body onload="load()" id="requestpage">

<div id="header" style="height: 160px;">
        <h1>Technical Marketing Specialist</h1>
           <h2><i>Social Media Scheduling Form</i></h2>
           <p style="width: 70%;">Fill out this form to schedule a social media post. When you have completed the form and hit "submit" an email
               will be auto-generated for you to attach corresponding images or additional information.
           </p>
</div>


<div id="content">
    <form class="gform" method="POST" data-email="Christian.Peterson@4wilmer.com" id="socialform"
    action="https://script.google.com/macros/s/AKfycbzbEeRj3aC9F1lmISR8awwruzqRG4YGC50EsNCFiIWHnBBbiZA/exec" autocomplete="off">
        <script>
            buildUserInformationForms("socialform");   
            buildHeader("socialform", "Post Information")
        </script>

        <label id="basicform">Post Date<br /></label>
        <input class="basicform" type="date" name="post-date" id="post-date" style="text-align: left;" required><br />

        <script>
            buildTextArea("socialform", "socialform", "post-text", "Social Media Post", true);
        </script>

        <button type="button" value="Submit" class="basicform" onclick="socialMediaRedirect()">Submit</button>
    </form>
</div>

<script>
function socialMediaRedirect() {
	var url = generateSocialMediaEmailString();
	if (!url || url.length === 0) {
		return;
    }

	window.open(url);
}
function generateSocialMediaEmailString() {
	var username = document.getElementById('user-name').value;
	var email = document.getElementById('email').value;
	var postdate = document.getElementById('post-date').value;
	var post = document.getElementById('post-text').value;

	var arr = [username, email, postdate, post];

	for (var i = 0; i < arr.length; i++) {
		if (!arr[i] || arr[i].length === 0) {
			alert("All fields are required!");
			return "";
		}
	}

	var ret = "mailto:Christian.Peterson@4wilmer.com?subject=[SocialMedia] " + postdate + "&body=[PostText] " + post;

    document.getElementById('socialform').reset();
	return ret;
}
</script>
</body>
</html>